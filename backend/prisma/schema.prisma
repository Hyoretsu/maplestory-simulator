generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL")
}

model Class {
    id   String @id @default(uuid())
    name String
    jobs Job[]
}

model Equipment {
    id           Int                    @id
    name         String
    attackSpeed  Int?
    enhancements Int
    bossReward   Boolean                @default(false)
    req          EquipmentRequirements?
    stats        EquipmentStats?
    setId        Int?
    set          EquipmentSet?          @relation(fields: [setId], references: [id])
    type         String
    category     String?
    iconId       String
    icon         Icon                   @relation(fields: [iconId], references: [id])
}

model EquipmentRequirements {
    equipId Int       @id
    equip   Equipment @relation(fields: [equipId], references: [id])
    job     String    @default("")
    level   Int       @default(0)
    str     Int       @default(0)
    dex     Int       @default(0)
    int     Int       @default(0)
    luk     Int       @default(0)
}

model EquipmentSet {
    id      Int                 @id
    name    String              @unique
    equips  Equipment[]
    bonuses EquipmentSetBonus[]
}

model EquipmentSetBonus {
    id       String       @id @default(uuid())
    setId    Int
    set      EquipmentSet @relation(fields: [setId], references: [id])
    str      Int          @default(0)
    dex      Int          @default(0)
    int      Int          @default(0)
    luk      Int          @default(0)
    hp       Float        @default(0)
    mp       Float        @default(0)
    att      Int          @default(0)
    matt     Int          @default(0)
    def      Int          @default(0)
    ied      Int          @default(0)
    dmg      Int          @default(0)
    bossDmg  Int          @default(0)
    critRate Int          @default(0)
    critDmg  Int          @default(0)
}

model EquipmentStats {
    equipId Int       @id
    equip   Equipment @relation(fields: [equipId], references: [id])
    str     Int       @default(0)
    dex     Int       @default(0)
    int     Int       @default(0)
    luk     Int       @default(0)
    hp      Int       @default(0)
    mp      Int       @default(0)
    att     Int       @default(0)
    matt    Int       @default(0)
    def     Int       @default(0)
    ied     Int       @default(0)
    bossDmg Int       @default(0)
    speed   Int       @default(0)
    jump    Int       @default(0)
}

model Experience {
    type  String
    level Int
    exp   BigInt

    @@id([type, level])
}

model Icon {
    id      String      @id @default(uuid())
    file    String
    width   Int
    height  Int
    equips  Equipment[]
    jobs    Job[]
}

model Job {
    id      Int    @id
    name    String
    classId String
    class   Class  @relation(fields: [classId], references: [id])
    iconId  String
    icon    Icon   @relation(fields: [iconId], references: [id])
}
